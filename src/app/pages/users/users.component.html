<app-table [loading]="loadingUserList()" addRecordLabel="Add user" (addRecordClicked)="prepareUserCreation()"
  (selectedTableRow)="prepareUserEdit($event)" [userRoles]="userRoles()" [dataSource]="userList()"
  [tableColumns]="tableColumns()" [tableTitle]="tableTitle()"></app-table>

<p-dialog [header]="dialogHeader()" [(visible)]="dialogVisibility" [modal]="true" [style]="{ width: '25rem' }">
  <form [formGroup]="form" (ngSubmit)="determineAddOrEditSubmission()">
    <div class="flex flex-column gap-4">
      <div class="flex flex-column gap-2">
        <label for="name">Name</label>
        <input formControlName="name" id="name" type="text" pInputText />
        <small *ngIf="formValidationService.isNotValidField(form, 'name')" class="text-red-500">
          {{formValidationService.getFieldError(form, 'name')}}
        </small>
      </div>
      <div class="flex flex-column gap-2">
        <label for="username">Username</label>
        <input formControlName="username" id="username" type="text" pInputText />
        <small *ngIf="formValidationService.isNotValidField(form, 'username')" class="text-red-500">
          {{formValidationService.getFieldError(form, 'username')}}
        </small>
      </div>
      <div class="flex flex-column gap-2">
        <label for="email">Email</label>
        <input formControlName="email" id="email" type="text" pInputText />
        <small *ngIf="formValidationService.isNotValidField(form, 'email')" class="text-red-500">
          {{formValidationService.getFieldError(form, 'email')}}
        </small>
      </div>
      <div class="flex flex-column gap-2">
        <label for="phone">Phone</label>
        <input formControlName="phone" id="phone" type="text" pInputText />
        <small *ngIf="formValidationService.isNotValidField(form, 'phone')" class="text-red-500">
          {{formValidationService.getFieldError(form, 'phone')}}
        </small>
      </div>
      <p-button type="submit" label="Save" styleClass="w-full" />
    </div>
  </form>
</p-dialog>
